<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>QR JSON Viewer</title>
<style>
  body {
    font-family: Arial;
    max-width: 900px;
    margin: 40px auto;
    text-align: center;
  }

  textarea {
    width: 100%;
    height: 200px;
    font-family: monospace;
    padding: 10px;
  }

  button {
    margin-top: 10px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }

  #result {
    margin-top: 20px;
  }

  img, svg {
    max-width: 100%;
  }
</style>
</head>
<body>

<h2>Renderizador de QR</h2>

<textarea id="jsonInput" placeholder="Cole aqui o JSON..."></textarea>
<br>
<button onclick="renderImage()">Mostrar Imagem</button>

<div id="result"></div>

<script>
function renderImage() {
  const input = document.getElementById("jsonInput").value;
  const resultDiv = document.getElementById("result");

  resultDiv.innerHTML = "";

  try {
    const parsed = JSON.parse(input);

    if (parsed.format === "svg" && parsed.svg) {
      resultDiv.innerHTML = parsed.svg;
    } 
    else if (parsed.format === "png_data_url" && parsed.dataUrl) {
      const img = document.createElement("img");
      img.src = parsed.dataUrl;
      resultDiv.appendChild(img);
    } 
    else {
      resultDiv.innerHTML = "<p style='color:red'>Formato não reconhecido.</p>";
    }

  } catch (err) {
    resultDiv.innerHTML = "<p style='color:red'>JSON inválido.</p>";
  }
}
</script>

</body>
</html>
